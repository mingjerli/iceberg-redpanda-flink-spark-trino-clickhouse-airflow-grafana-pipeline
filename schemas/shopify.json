{
  "source": "shopify",
  "api_version": "2024-10",
  "api_type": "REST Admin API / Webhook",
  "documentation": "https://shopify.dev/docs/api/admin-rest/2024-10/resources/order",
  "note": "Webhook payloads use REST API format. GraphQL is required for API calls as of April 2025, but webhooks still deliver REST-formatted JSON.",
  "tables": {
    "orders": {
      "description": "Order headers from Shopify store (webhook: orders/create, orders/updated)",
      "webhook_topic": "orders/create",
      "columns": {
        "id": {"type": "INT64", "description": "Unique order identifier", "pii": false, "example": 5678901234},
        "admin_graphql_api_id": {"type": "STRING", "description": "GraphQL API ID", "pii": false, "example": "gid://shopify/Order/5678901234"},
        "app_id": {"type": "INT64", "description": "ID of the app that created the order", "pii": false, "nullable": true},
        "browser_ip": {"type": "STRING", "description": "IP address of customer's browser", "pii": true, "nullable": true, "example": "192.168.1.1"},
        "buyer_accepts_marketing": {"type": "BOOLEAN", "description": "Whether customer consented to marketing emails", "pii": false},
        "cancel_reason": {"type": "STRING", "description": "Reason for cancellation: customer, fraud, inventory, declined, other", "pii": false, "nullable": true, "enum": ["customer", "fraud", "inventory", "declined", "other", null]},
        "cancelled_at": {"type": "TIMESTAMP", "description": "When order was cancelled (null if not)", "pii": false, "nullable": true},
        "cart_token": {"type": "STRING", "description": "Unique token for the cart that created this order", "pii": false, "nullable": true},
        "checkout_id": {"type": "INT64", "description": "ID of the checkout that created this order", "pii": false, "nullable": true},
        "checkout_token": {"type": "STRING", "description": "Unique token for the checkout", "pii": false, "nullable": true},
        "closed_at": {"type": "TIMESTAMP", "description": "When order was closed/completed", "pii": false, "nullable": true},
        "confirmation_number": {"type": "STRING", "description": "Random alphanumeric identifier for the order", "pii": false, "example": "ABCD1234"},
        "confirmed": {"type": "BOOLEAN", "description": "Whether the order has been confirmed", "pii": false},
        "created_at": {"type": "TIMESTAMP", "description": "Order creation timestamp (ISO 8601)", "pii": false},
        "currency": {"type": "STRING", "description": "Three-letter currency code (ISO 4217)", "pii": false, "example": "USD"},
        "current_subtotal_price": {"type": "DECIMAL", "description": "Current subtotal after edits/refunds", "pii": false},
        "current_total_discounts": {"type": "DECIMAL", "description": "Current total discounts after edits", "pii": false},
        "current_total_price": {"type": "DECIMAL", "description": "Current total price after edits/refunds", "pii": false},
        "current_total_tax": {"type": "DECIMAL", "description": "Current total tax after edits/refunds", "pii": false},
        "customer_locale": {"type": "STRING", "description": "Customer's locale (e.g., 'en', 'fr-CA')", "pii": false, "nullable": true},
        "discount_codes": {"type": "JSON", "description": "Array of discount codes applied", "pii": false, "example": [{"code": "SAVE10", "amount": "10.00", "type": "percentage"}]},
        "email": {"type": "STRING", "description": "Customer email at time of order", "pii": true, "example": "customer@example.com"},
        "estimated_taxes": {"type": "BOOLEAN", "description": "Whether taxes are estimated (true until shipping address provided)", "pii": false},
        "financial_status": {"type": "STRING", "description": "Payment status", "pii": false, "enum": ["pending", "authorized", "partially_paid", "paid", "partially_refunded", "refunded", "voided"]},
        "fulfillment_status": {"type": "STRING", "description": "Shipping status", "pii": false, "nullable": true, "enum": ["fulfilled", "partial", "restocked", null]},
        "landing_site": {"type": "STRING", "description": "URL of first page customer landed on", "pii": false, "nullable": true},
        "landing_site_ref": {"type": "STRING", "description": "Landing site reference parameter", "pii": false, "nullable": true},
        "name": {"type": "STRING", "description": "Order name shown in admin (e.g., '#1001')", "pii": false, "example": "#1001"},
        "note": {"type": "STRING", "description": "Customer note on order", "pii": false, "nullable": true},
        "note_attributes": {"type": "JSON", "description": "Additional order attributes as key-value pairs", "pii": false, "nullable": true},
        "number": {"type": "INT64", "description": "Numeric order number (without #)", "pii": false, "example": 1001},
        "order_number": {"type": "INT64", "description": "Shop-unique order number", "pii": false, "example": 1001},
        "order_status_url": {"type": "STRING", "description": "URL for customer to check order status", "pii": false},
        "payment_gateway_names": {"type": "JSON", "description": "List of payment gateways used", "pii": false, "example": ["shopify_payments"]},
        "phone": {"type": "STRING", "description": "Customer phone number", "pii": true, "nullable": true},
        "presentment_currency": {"type": "STRING", "description": "Currency shown to customer", "pii": false},
        "processed_at": {"type": "TIMESTAMP", "description": "When payment was processed", "pii": false},
        "referring_site": {"type": "STRING", "description": "URL that referred customer to store", "pii": false, "nullable": true},
        "source_identifier": {"type": "STRING", "description": "POS or third-party order ID", "pii": false, "nullable": true},
        "source_name": {"type": "STRING", "description": "Channel source: web, pos, mobile, api, etc.", "pii": false, "example": "web"},
        "source_url": {"type": "STRING", "description": "URL where order originated", "pii": false, "nullable": true},
        "subtotal_price": {"type": "DECIMAL", "description": "Sum of line item prices before discounts/shipping/tax", "pii": false},
        "tags": {"type": "STRING", "description": "Comma-separated tags", "pii": false, "nullable": true},
        "tax_lines": {"type": "JSON", "description": "Array of tax line objects", "pii": false},
        "taxes_included": {"type": "BOOLEAN", "description": "Whether taxes are included in subtotal", "pii": false},
        "test": {"type": "BOOLEAN", "description": "Whether this is a test order", "pii": false},
        "token": {"type": "STRING", "description": "Unique token for the order", "pii": false},
        "total_discounts": {"type": "DECIMAL", "description": "Total discount amount applied", "pii": false},
        "total_line_items_price": {"type": "DECIMAL", "description": "Sum of all line item prices", "pii": false},
        "total_outstanding": {"type": "DECIMAL", "description": "Outstanding balance to be paid", "pii": false},
        "total_price": {"type": "DECIMAL", "description": "Final order total", "pii": false},
        "total_shipping_price_set": {"type": "JSON", "description": "Total shipping in shop and presentment currencies", "pii": false},
        "total_tax": {"type": "DECIMAL", "description": "Total tax amount", "pii": false},
        "total_tip_received": {"type": "DECIMAL", "description": "Total tip amount", "pii": false},
        "total_weight": {"type": "INT64", "description": "Total weight in grams", "pii": false},
        "updated_at": {"type": "TIMESTAMP", "description": "Last update timestamp", "pii": false},
        "user_id": {"type": "INT64", "description": "ID of staff member who created order (POS)", "pii": false, "nullable": true},
        "customer": {"type": "JSON", "description": "Nested customer object", "pii": true, "nullable": true},
        "billing_address": {"type": "JSON", "description": "Nested billing address object", "pii": true, "nullable": true},
        "shipping_address": {"type": "JSON", "description": "Nested shipping address object", "pii": true, "nullable": true},
        "line_items": {"type": "JSON", "description": "Array of line item objects", "pii": false},
        "fulfillments": {"type": "JSON", "description": "Array of fulfillment objects", "pii": false},
        "refunds": {"type": "JSON", "description": "Array of refund objects", "pii": false},
        "shipping_lines": {"type": "JSON", "description": "Array of shipping line objects", "pii": false},
        "_webhook_received_at": {"type": "TIMESTAMP", "description": "When webhook was received (added by ingestion)", "pii": false},
        "_webhook_topic": {"type": "STRING", "description": "Webhook topic (added by ingestion)", "pii": false}
      }
    },
    "customers": {
      "description": "Customer records from Shopify (webhook: customers/create, customers/update)",
      "webhook_topic": "customers/create",
      "columns": {
        "id": {"type": "INT64", "description": "Unique customer identifier", "pii": false},
        "admin_graphql_api_id": {"type": "STRING", "description": "GraphQL API ID", "pii": false},
        "email": {"type": "STRING", "description": "Customer email address", "pii": true},
        "first_name": {"type": "STRING", "description": "Customer first name", "pii": true},
        "last_name": {"type": "STRING", "description": "Customer last name", "pii": true},
        "phone": {"type": "STRING", "description": "Customer phone number (E.164 format)", "pii": true, "nullable": true},
        "created_at": {"type": "TIMESTAMP", "description": "Customer creation timestamp", "pii": false},
        "updated_at": {"type": "TIMESTAMP", "description": "Last update timestamp", "pii": false},
        "accepts_marketing": {"type": "BOOLEAN", "description": "Marketing opt-in status", "pii": false},
        "accepts_marketing_updated_at": {"type": "TIMESTAMP", "description": "When marketing preference was last updated", "pii": false, "nullable": true},
        "currency": {"type": "STRING", "description": "Customer's preferred currency", "pii": false, "nullable": true},
        "default_address": {"type": "JSON", "description": "Default address object", "pii": true, "nullable": true},
        "addresses": {"type": "JSON", "description": "Array of address objects", "pii": true},
        "marketing_opt_in_level": {"type": "STRING", "description": "Marketing opt-in level", "pii": false, "nullable": true, "enum": ["single_opt_in", "confirmed_opt_in", "unknown", null]},
        "note": {"type": "STRING", "description": "Note about the customer", "pii": false, "nullable": true},
        "orders_count": {"type": "INT64", "description": "Total number of orders placed", "pii": false},
        "state": {"type": "STRING", "description": "Customer state: enabled, disabled, invited, declined", "pii": false, "enum": ["enabled", "disabled", "invited", "declined"]},
        "tags": {"type": "STRING", "description": "Comma-separated customer tags", "pii": false, "nullable": true},
        "tax_exempt": {"type": "BOOLEAN", "description": "Whether customer is tax exempt", "pii": false},
        "tax_exemptions": {"type": "JSON", "description": "Array of tax exemption types", "pii": false},
        "total_spent": {"type": "DECIMAL", "description": "Lifetime spend amount", "pii": false},
        "verified_email": {"type": "BOOLEAN", "description": "Whether email is verified", "pii": false},
        "_webhook_received_at": {"type": "TIMESTAMP", "description": "When webhook was received (added by ingestion)", "pii": false},
        "_webhook_topic": {"type": "STRING", "description": "Webhook topic (added by ingestion)", "pii": false}
      }
    },
    "products": {
      "description": "Product catalog from Shopify (webhook: products/create, products/update)",
      "webhook_topic": "products/create",
      "columns": {
        "id": {"type": "INT64", "description": "Unique product identifier", "pii": false},
        "admin_graphql_api_id": {"type": "STRING", "description": "GraphQL API ID", "pii": false},
        "title": {"type": "STRING", "description": "Product title", "pii": false},
        "body_html": {"type": "STRING", "description": "Product description in HTML", "pii": false, "nullable": true},
        "vendor": {"type": "STRING", "description": "Product vendor/brand", "pii": false},
        "product_type": {"type": "STRING", "description": "Product category type", "pii": false, "nullable": true},
        "handle": {"type": "STRING", "description": "URL-safe product handle", "pii": false},
        "created_at": {"type": "TIMESTAMP", "description": "Product creation timestamp", "pii": false},
        "updated_at": {"type": "TIMESTAMP", "description": "Last update timestamp", "pii": false},
        "published_at": {"type": "TIMESTAMP", "description": "When product was published", "pii": false, "nullable": true},
        "published_scope": {"type": "STRING", "description": "Publishing scope: web, global", "pii": false},
        "status": {"type": "STRING", "description": "Product status", "pii": false, "enum": ["active", "archived", "draft"]},
        "tags": {"type": "STRING", "description": "Comma-separated product tags", "pii": false, "nullable": true},
        "template_suffix": {"type": "STRING", "description": "Theme template suffix", "pii": false, "nullable": true},
        "variants": {"type": "JSON", "description": "Array of variant objects", "pii": false},
        "options": {"type": "JSON", "description": "Array of product option objects", "pii": false},
        "images": {"type": "JSON", "description": "Array of image objects", "pii": false},
        "image": {"type": "JSON", "description": "Primary image object", "pii": false, "nullable": true},
        "_webhook_received_at": {"type": "TIMESTAMP", "description": "When webhook was received", "pii": false},
        "_webhook_topic": {"type": "STRING", "description": "Webhook topic", "pii": false}
      }
    },
    "line_items": {
      "description": "Individual line items extracted from orders (denormalized from orders.line_items)",
      "note": "This table is derived from the nested line_items array in order webhooks",
      "columns": {
        "id": {"type": "INT64", "description": "Unique line item identifier", "pii": false},
        "order_id": {"type": "INT64", "description": "Reference to parent order", "pii": false},
        "admin_graphql_api_id": {"type": "STRING", "description": "GraphQL API ID", "pii": false},
        "fulfillable_quantity": {"type": "INT64", "description": "Quantity that can still be fulfilled", "pii": false},
        "fulfillment_service": {"type": "STRING", "description": "Fulfillment service provider", "pii": false},
        "fulfillment_status": {"type": "STRING", "description": "Line item fulfillment status", "pii": false, "nullable": true},
        "gift_card": {"type": "BOOLEAN", "description": "Whether item is a gift card", "pii": false},
        "grams": {"type": "INT64", "description": "Item weight in grams", "pii": false},
        "name": {"type": "STRING", "description": "Product title and variant title combined", "pii": false},
        "price": {"type": "DECIMAL", "description": "Unit price", "pii": false},
        "product_exists": {"type": "BOOLEAN", "description": "Whether product still exists", "pii": false},
        "product_id": {"type": "INT64", "description": "Reference to product", "pii": false, "nullable": true},
        "properties": {"type": "JSON", "description": "Custom line item properties", "pii": false},
        "quantity": {"type": "INT64", "description": "Number of items ordered", "pii": false},
        "requires_shipping": {"type": "BOOLEAN", "description": "Whether item requires shipping", "pii": false},
        "sku": {"type": "STRING", "description": "Stock keeping unit", "pii": false, "nullable": true},
        "taxable": {"type": "BOOLEAN", "description": "Whether item is taxable", "pii": false},
        "title": {"type": "STRING", "description": "Product title at time of order", "pii": false},
        "total_discount": {"type": "DECIMAL", "description": "Line-level discount amount", "pii": false},
        "variant_id": {"type": "INT64", "description": "Reference to product variant", "pii": false, "nullable": true},
        "variant_inventory_management": {"type": "STRING", "description": "Inventory management service", "pii": false, "nullable": true},
        "variant_title": {"type": "STRING", "description": "Variant title (e.g., 'Large / Blue')", "pii": false, "nullable": true},
        "vendor": {"type": "STRING", "description": "Product vendor", "pii": false, "nullable": true},
        "tax_lines": {"type": "JSON", "description": "Array of tax line objects for this item", "pii": false},
        "discount_allocations": {"type": "JSON", "description": "Array of discount allocations", "pii": false},
        "_extracted_at": {"type": "TIMESTAMP", "description": "When record was extracted from order", "pii": false}
      }
    },
    "addresses": {
      "description": "Customer addresses extracted from customers (denormalized)",
      "note": "Derived from customers.addresses array",
      "columns": {
        "id": {"type": "INT64", "description": "Unique address identifier", "pii": false},
        "customer_id": {"type": "INT64", "description": "Reference to customer", "pii": false},
        "first_name": {"type": "STRING", "description": "Address first name", "pii": true},
        "last_name": {"type": "STRING", "description": "Address last name", "pii": true},
        "company": {"type": "STRING", "description": "Company name", "pii": false, "nullable": true},
        "address1": {"type": "STRING", "description": "Street address line 1", "pii": true},
        "address2": {"type": "STRING", "description": "Street address line 2", "pii": true, "nullable": true},
        "city": {"type": "STRING", "description": "City name", "pii": false},
        "province": {"type": "STRING", "description": "State/province name", "pii": false, "nullable": true},
        "province_code": {"type": "STRING", "description": "State/province code", "pii": false, "nullable": true},
        "country": {"type": "STRING", "description": "Country name", "pii": false},
        "country_code": {"type": "STRING", "description": "Two-letter country code (ISO 3166-1)", "pii": false},
        "zip": {"type": "STRING", "description": "Postal/ZIP code", "pii": true},
        "phone": {"type": "STRING", "description": "Address phone number", "pii": true, "nullable": true},
        "name": {"type": "STRING", "description": "Full name (first + last)", "pii": true},
        "default": {"type": "BOOLEAN", "description": "Whether this is the default address", "pii": false},
        "_extracted_at": {"type": "TIMESTAMP", "description": "When record was extracted", "pii": false}
      }
    }
  },
  "nested_objects": {
    "customer": {
      "description": "Customer object nested in orders",
      "fields": {
        "id": "INT64",
        "email": "STRING (PII)",
        "first_name": "STRING (PII)",
        "last_name": "STRING (PII)",
        "phone": "STRING (PII)",
        "default_address": "JSON"
      }
    },
    "address": {
      "description": "Address object (billing/shipping)",
      "fields": {
        "first_name": "STRING (PII)",
        "last_name": "STRING (PII)",
        "address1": "STRING (PII)",
        "address2": "STRING (PII)",
        "city": "STRING",
        "province": "STRING",
        "province_code": "STRING",
        "country": "STRING",
        "country_code": "STRING",
        "zip": "STRING (PII)",
        "phone": "STRING (PII)",
        "company": "STRING",
        "name": "STRING (PII)",
        "latitude": "DECIMAL",
        "longitude": "DECIMAL"
      }
    },
    "tax_line": {
      "description": "Tax line object",
      "fields": {
        "title": "STRING",
        "price": "DECIMAL",
        "rate": "DECIMAL",
        "channel_liable": "BOOLEAN"
      }
    },
    "discount_code": {
      "description": "Discount code object",
      "fields": {
        "code": "STRING",
        "amount": "DECIMAL",
        "type": "STRING (fixed_amount, percentage, shipping)"
      }
    }
  }
}
