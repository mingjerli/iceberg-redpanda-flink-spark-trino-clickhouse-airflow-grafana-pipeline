# =============================================================================
# Iceberg Incremental Demo - Environment Configuration
# =============================================================================
# Copy this file to .env and customize values as needed:
#   cp .env.example .env
#
# All values have sensible defaults for local development.
# =============================================================================

# -----------------------------------------------------------------------------
# Project Settings
# -----------------------------------------------------------------------------
COMPOSE_PROJECT_NAME=iceberg-incremental

# -----------------------------------------------------------------------------
# MinIO (S3-compatible Storage)
# -----------------------------------------------------------------------------
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=admin123456
MINIO_ENDPOINT=http://minio:9000
MINIO_CONSOLE_PORT=9001

# Bucket names
MINIO_WAREHOUSE_BUCKET=warehouse
MINIO_RAW_EVENTS_BUCKET=raw-events

# -----------------------------------------------------------------------------
# Iceberg REST Catalog
# -----------------------------------------------------------------------------
ICEBERG_REST_PORT=8181
ICEBERG_CATALOG_NAME=demo

# Catalog configuration
CATALOG_WAREHOUSE=s3://warehouse/
CATALOG_IO_IMPL=org.apache.iceberg.aws.s3.S3FileIO

# -----------------------------------------------------------------------------
# Redpanda (Kafka-compatible Message Queue)
# -----------------------------------------------------------------------------
REDPANDA_BROKER_PORT=9092
REDPANDA_SCHEMA_REGISTRY_PORT=8081
REDPANDA_CONSOLE_PORT=8080
REDPANDA_ADMIN_PORT=9644

# Topic configuration
REDPANDA_DEFAULT_PARTITIONS=3
REDPANDA_DEFAULT_REPLICATION=1

# -----------------------------------------------------------------------------
# Apache Flink (Streaming ETL)
# -----------------------------------------------------------------------------
FLINK_JOBMANAGER_PORT=8082
FLINK_TASKMANAGER_SLOTS=4
FLINK_PARALLELISM_DEFAULT=2

# Checkpointing
FLINK_CHECKPOINT_INTERVAL_MS=60000
FLINK_CHECKPOINT_DIR=s3://warehouse/checkpoints/flink

# -----------------------------------------------------------------------------
# Apache Spark (Batch ETL)
# -----------------------------------------------------------------------------
SPARK_MASTER_PORT=7077
SPARK_MASTER_WEBUI_PORT=8083
SPARK_WORKER_CORES=4
SPARK_WORKER_MEMORY=4g
SPARK_DRIVER_MEMORY=2g
SPARK_EXECUTOR_MEMORY=2g

# -----------------------------------------------------------------------------
# ClickHouse (OLAP Database)
# -----------------------------------------------------------------------------
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_NATIVE_PORT=9000
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=clickhouse123

# -----------------------------------------------------------------------------
# Trino (Ad-hoc SQL Queries)
# -----------------------------------------------------------------------------
TRINO_PORT=8084

# -----------------------------------------------------------------------------
# Network Configuration
# -----------------------------------------------------------------------------
# External ports (change these if you have conflicts)
EXTERNAL_MINIO_API_PORT=9000
EXTERNAL_MINIO_CONSOLE_PORT=9001
EXTERNAL_REDPANDA_BROKER_PORT=19092
EXTERNAL_REDPANDA_CONSOLE_PORT=8080
EXTERNAL_FLINK_UI_PORT=8082
EXTERNAL_SPARK_UI_PORT=8083
EXTERNAL_CLICKHOUSE_HTTP_PORT=8123
EXTERNAL_CLICKHOUSE_NATIVE_PORT=19000
EXTERNAL_TRINO_PORT=8084
EXTERNAL_ICEBERG_REST_PORT=8181

# -----------------------------------------------------------------------------
# Resource Limits (adjust based on your machine)
# -----------------------------------------------------------------------------
# Set to 'true' to enable resource limits
ENABLE_RESOURCE_LIMITS=false

# Memory limits (only applied if ENABLE_RESOURCE_LIMITS=true)
MINIO_MEMORY_LIMIT=512m
REDPANDA_MEMORY_LIMIT=1g
FLINK_JOBMANAGER_MEMORY=1g
FLINK_TASKMANAGER_MEMORY=2g
SPARK_MASTER_MEMORY=512m
SPARK_WORKER_MEMORY_LIMIT=4g
CLICKHOUSE_MEMORY_LIMIT=2g
TRINO_MEMORY_LIMIT=2g
